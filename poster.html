<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="styles/poster.css">
    <title>Document</title>
</head>
<body>
<div id="content">
    <div id="enlargedPoster">
        <span id="target"></span>
        <img id="enlargedImage" src="images/Red_square.png">
    </div>
    <div class="poster">
        <img src="images/Red_square.png", 
        onmouseover="animation(this)"
        onmouseleave="hide_large()">
    </div>
    <div class="poster">
        <img src="images/Red_square.png", 
        onmouseover="animation(this)"
        onmouseleave="hide_large()">
    </div>
    <div class="poster">
        <img src="images/Red_square.png" id="keytester"
        onmouseover="animation(this)"
        onmouseleave="hide_large()">
    </div>
</div>
</body>
<script>
const target = document.getElementById("target").getBoundingClientRect();
const border = 6
const x_offset = document.getElementById("content").getBoundingClientRect().x + border
const y_offset = document.getElementById("content").getBoundingClientRect().y + border
console.log(border)
console.log(x_offset);
console.log(y_offset);
console.log(target);
function animation(E) {
    const start = E.getBoundingClientRect();
    console.log(start)
    let animated = document.getElementById("enlargedImage");
    //  place the center of the element at the center of target.
    let width = start.width;
    let height = start.height;
    // BUG: there is an offset because left and right elements are
    // relative to the container
    // a correction is needed
    const scale = 2
    let left = target.x - start.x - x_offset - width /2
    let down = target.y - start.y - y_offset - height/2
    left /= scale;
    down /= scale;

    console.log(`${start.left}, ${start.top}`);

    animated.style.setProperty('--startx', `${start.left}px`);
    animated.style.setProperty('--starty', `${start.top}px`);
    animated.style.setProperty('--endx', `${left}px`);
    animated.style.setProperty('--endy', `${down}px`);
    document.getElementById("enlargedPoster").style.display = "block";
}
function hide_large() {
    document.getElementById("enlargedPoster").style.display = "none";
}
</script>


</html>